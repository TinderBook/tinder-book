<script src="/js/scripts.js"></script>


<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">


     <div class="conversation-start">
    <div class="user-images">
        <img src="{{currentUser.avatarUrl}}" alt="Avatar del usuario actual" class="rounded-circle" width="100">
        <img src="{{otherUser.avatarUrl}}" alt="Avatar del otro usuario" class="rounded-circle" width="100">
    </div>
    <h2 class="mt-2">¡Es el comienzo de una nueva conversación!</h2>
    <p>Estás chateando con {{otherUser.username}}. Esperamos que tengan una charla amena.</p>
</div>



      <div class="messages-container p-3 mb-4 border rounded overflow-auto">

        {{#each match.messages}}
        
{{log currentUser}}


        {{#ifEqual this.sender._id ../currentUser._id}}
       
        <div class="message sent">
           <img src="{{../currentUser.avatarUrl}}" alt="Avatar" class="rounded-circle" width="50">
          <p class="mb-1">{{this.content}}</p>
          <small class="text-muted">Enviado por: {{this.sender.username}}</small>
          {{else}}
          <div class="message received">
            <img src="{{this.sender.avatarUrl}}" alt="Avatar" class="rounded-circle" width="50">
            <p class="mb-1">{{this.content}}</p>
            <small class="text-muted">Recibido de: {{this.sender.username}}</small>
            {{/ifEqual}}
          </div>
          {{/each}}

        </div>

        <div class="message-form">
          <form action="/matches/{{match._id}}/messages" method="POST">
            <textarea name="content" rows="4" cols="50"></textarea>
            <button type="submit">Enviar</button>
          </form>
        </div>
      </div>
    </div>


  </div>